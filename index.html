<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
        <meta name="description" content="" />
        <meta name="author" content="" />
        <title>Kelsie Barnes ECE 3400 Website</title>
        <!-- Favicon-->
        <link rel="icon" type="image/x-icon" href="assets/img/favicon.ico" />
        <!-- Font Awesome icons (free version)-->
        <script src="https://use.fontawesome.com/releases/v5.15.1/js/all.js" crossorigin="anonymous"></script>
        <!-- Google fonts-->
        <link href="https://fonts.googleapis.com/css?family=Montserrat:400,700" rel="stylesheet" type="text/css" />
        <link href="https://fonts.googleapis.com/css?family=Lato:400,700,400italic,700italic" rel="stylesheet" type="text/css" />
        <!-- Core theme CSS (includes Bootstrap)-->
        <link href="css/styles.css" rel="stylesheet" />
    </head>
    <body id="page-top">
        <!-- Navigation-->
        <nav class="navbar navbar-expand-lg bg-secondary text-uppercase fixed-top" id="mainNav">
            <div class="container">
                <a class="navbar-brand js-scroll-trigger" href="#page-top">Kelsie Barnes ECE 3400 Website</a>
                <button class="navbar-toggler navbar-toggler-right text-uppercase font-weight-bold bg-primary text-white rounded" type="button" data-toggle="collapse" data-target="#navbarResponsive" aria-controls="navbarResponsive" aria-expanded="false" aria-label="Toggle navigation">
                    Menu
                    <i class="fas fa-bars"></i>
                </button>
                <div class="collapse navbar-collapse" id="navbarResponsive">
                    <ul class="navbar-nav ml-auto">
                        <li class="nav-item mx-0 mx-lg-1"><a class="nav-link py-3 px-0 px-lg-3 rounded js-scroll-trigger" href="#portfolio">Labs</a></li>
                        <li class="nav-item mx-0 mx-lg-1"><a class="nav-link py-3 px-0 px-lg-3 rounded js-scroll-trigger" href="#about">About</a></li>
                    </ul>
                </div>
            </div>
        </nav>
        <!-- Masthead-->
        <header class="masthead bg-primary text-white text-center">
            <div class="container d-flex align-items-center flex-column">
                <!-- Masthead Avatar Image-->
                <img class="masthead-avatar mb-5" src="assets/img/RobotImage.jpg" alt="" />
                <!-- Masthead Heading-->
                <h1 class="masthead-heading text-uppercase mb-0">Kelsie Barnes ECE 3400 Website</h1>
                <!-- Icon Divider-->
                <div class="divider-custom divider-light">
                    <div class="divider-custom-line"></div>
                    <div class="divider-custom-icon"><i class="fas fa-star"></i></div>
                    <div class="divider-custom-line"></div>
                </div>
                <!-- Masthead Subheading-->
                <p class="masthead-subheading font-weight-light mb-0">A website documenting labs in ECE 3400 for Kelsie Barnes</p>
            </div>
        </header>
        <!-- Portfolio Section-->
        <section class="page-section portfolio" id="portfolio">
            <div class="container">
                <!-- Portfolio Section Heading-->
                <h2 class="page-section-heading text-center text-uppercase text-secondary mb-0">Labs</h2>
                <!-- Icon Divider-->
                <div class="divider-custom">
                    <div class="divider-custom-line"></div>
                    <div class="divider-custom-icon"><i class="fas fa-star"></i></div>
                    <div class="divider-custom-line"></div>
                </div>
                <!-- Portfolio Grid Items-->
                <div class="row justify-content-center">
                    <!-- Portfolio Item 1-->
                    <div class="col-md-6 col-lg-4 mb-5">
                        <div class="portfolio-item mx-auto" data-toggle="modal" data-target="#portfolioModal1">
                            <div class="portfolio-item-caption d-flex align-items-center justify-content-center h-100 w-100">
                                <div class="portfolio-item-caption-content text-center text-white"><i class="fas fa-plus fa-3x"></i></div>
                            </div>
                            <img class="img-fluid" src="assets/img/Lab1Title.jpg" alt="" />
                        </div>
                    </div>
                    <!-- Portfolio Item 2-->
                    <div class="col-md-6 col-lg-4 mb-5">
                        <div class="portfolio-item mx-auto" data-toggle="modal" data-target="#portfolioModal2">
                            <div class="portfolio-item-caption d-flex align-items-center justify-content-center h-100 w-100">
                                <div class="portfolio-item-caption-content text-center text-white"><i class="fas fa-plus fa-3x"></i></div>
                            </div>
                            <img class="img-fluid" src="assets/img/TitleImage.jpg" alt="" />
                        </div>
                    </div>
                    <!-- Portfolio Item 3-->
                    <div class="col-md-6 col-lg-4 mb-5">
                        <div class="portfolio-item mx-auto" data-toggle="modal" data-target="#portfolioModal3">
                            <div class="portfolio-item-caption d-flex align-items-center justify-content-center h-100 w-100">
                                <div class="portfolio-item-caption-content text-center text-white"><i class="fas fa-plus fa-3x"></i></div>
                            </div>
                            <img class="img-fluid" src="assets/img/Lab3Title.jpg" alt="" />
                        </div>
                    </div>
                    <!-- Portfolio Item 4-->
                    <div class="col-md-6 col-lg-4 mb-5 mb-lg-0">
                        <div class="portfolio-item mx-auto" data-toggle="modal" data-target="#portfolioModal4">
                            <div class="portfolio-item-caption d-flex align-items-center justify-content-center h-100 w-100">
                                <div class="portfolio-item-caption-content text-center text-white"><i class="fas fa-plus fa-3x"></i></div>
                            </div>
                            <img class="img-fluid" src="assets/img/Lab4Title.jpg" alt="" />
                        </div>
                    </div>


                </div>
            </div>
        </section>
        <!-- About Section-->
        <section class="page-section bg-primary text-white mb-0" id="about">
            <div class="container">
                <!-- About Section Heading-->
                <h2 class="page-section-heading text-center text-uppercase text-white">About</h2>
                <!-- Icon Divider-->
                <div class="divider-custom divider-light">
                    <div class="divider-custom-line"></div>
                    <div class="divider-custom-icon"><i class="fas fa-star"></i></div>
                    <div class="divider-custom-line"></div>
                </div>
                <!-- About Section Content-->
                <div class="row">
                    <div class="col-lg-4 ml-auto"><p class="lead">This website was created to document the progress made on ECE 3400 labs</p></div>
                    <div class="col-lg-4 mr-auto"><p class="lead">This site is hosted using GitHub Pages and will be updated throughout the course.</p></div>
                </div>

            </div>
        </section>
        
        <!-- Footer-->
        <footer class="footer text-center">
            <div class="container">
                <div class="row">
                    <!-- Footer Location-->
                    <div class="col-lg-4 mb-5 mb-lg-0">
                        <h4 class="text-uppercase mb-4">Location</h4>
                        <p class="lead mb-0">
                            Cornell University
                            <br />
                            Ithaca, NY 14850
                        </p>
                    </div>
                    <!-- Footer Social Icons-->
                    <div class="col-lg-4 mb-5 mb-lg-0">
                        <h4 class="text-uppercase mb-4">Around the Web</h4>
                        <a class="btn btn-outline-light btn-social mx-1" href="#!"><i class="fab fa-fw fa-facebook-f"></i></a>
                        <a class="btn btn-outline-light btn-social mx-1" href="#!"><i class="fab fa-fw fa-twitter"></i></a>
                        <a class="btn btn-outline-light btn-social mx-1" href="#!"><i class="fab fa-fw fa-linkedin-in"></i></a>
                        <a class="btn btn-outline-light btn-social mx-1" href="#!"><i class="fab fa-fw fa-dribbble"></i></a>
                    </div>
                    <!-- Footer About Text-->
                    <div class="col-lg-4">
                        <h4 class="text-uppercase mb-4">About Freelancer</h4>
                        <p class="lead mb-0">
                            Freelance is a free to use, MIT licensed Bootstrap theme created by
                            <a href="http://startbootstrap.com">Start Bootstrap</a>
                            .
                        </p>
                    </div>
                </div>
            </div>
        </footer>
        <!-- Copyright Section-->
        <div class="copyright py-4 text-center text-white">
            <div class="container"><small>Copyright © Your Website 2020</small></div>
        </div>
        <!-- Scroll to Top Button (Only visible on small and extra-small screen sizes)-->
        <div class="scroll-to-top d-lg-none position-fixed">
            <a class="js-scroll-trigger d-block text-center text-white rounded" href="#page-top"><i class="fa fa-chevron-up"></i></a>
        </div>
        <!-- Portfolio Modals-->
        <!-- Portfolio Modal 1-->
        <div class="portfolio-modal modal fade" id="portfolioModal1" tabindex="-1" role="dialog" aria-labelledby="portfolioModal1Label" aria-hidden="true">
            <div class="modal-dialog modal-xl" role="document">
                <div class="modal-content">
                    <button class="close" type="button" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true"><i class="fas fa-times"></i></span>
                    </button>
                    <div class="modal-body text-center">
                        <div class="container">
                            <div class="row justify-content-center">
                                <div class="col-lg-8">
                                    <!-- Portfolio Modal - Title-->
                                    <h2 class="portfolio-modal-title text-secondary text-uppercase mb-0" id="portfolioModal1Label">Lab 1</h2>
                                    <!-- Icon Divider-->
                                    <div class="divider-custom">
                                        <div class="divider-custom-line"></div>
                                        <div class="divider-custom-icon"><i class="fas fa-star"></i></div>
                                        <div class="divider-custom-line"></div>
                                    </div>
                                    <!-- Portfolio Modal - Text-->
                                    <p class="mb-5">The purpose of lab 1 was to learn how to program the Arduino and set up the light sensing component for the light-following robot. The first task for lab 1 was becoming familiar with the Arduino IDE. A small program was run to blink the onboard LED. This process helped with understanding both the arduino programming space, as well as how the code communicates with the arduino. In this program the onboard LED was turned on and off within the program, and blinked according to specified delays. In order to complete this task the Arduino nano was mounted on the LED board, and connected to the computer with a USB cable, so the code could be run. The code was then modified to change the delay time and understand the impact of different delays on the behavior of the light.  </p>
                                    <p class="mb-5">In order to sense light the robot uses CdS photoresistors. These resistors change resistances depending on the light, with less illumination causing greater resistance. The spec sheet shows that when the photoresistor is in the dark it has a resistance of 0.5 Mohm, and when it’s illuminated it’s resistance is 15Kohm.</p>
                                    <p class="mb-5">The arduino reads voltage as analog, and this analog signal is converted to digital. This is done in the equation below. </p>
                                    <img class="img-fluid rounded mb-5" src="assets/img/VrefEquation.PNG" alt="" />
                                    <p class="mb-5">In order to determine what Vref is, a wire was tied between the 3.3V pin and the A0 pin. The code that was run then displayed the analog-to-digital converted voltage to be 693. This value was subbed into the equation as the “Result”, and the Vin value was set to be 3.3V. Solving for Vref gave a value of 4.87V. This allows us to conclude that REFSEL in the CTRLC register of AdC0 is 4.87V. If Vin>Vref then the result will be greater than 1023. The maximum voltage with respect to ground that can be applied to any pin is Vdd+0.5V. </p>
                                    <p class="mb-5">With a choice of R1=10Kohm, the result from analogRead is found to be 39.19. This is making the assumption that the resistance of the photoresistor is 258Kohm, given medium light. This resistor assumption leads to a Vout value of 0.1865V, which becomes the Vin value in the above equation. With Vref being equal to 4.87, we find the aforementioned result.  </p>
                                    <p class="mb-5">The circuit used for this lab was a voltage divider, because the voltage change allowed for the changing quantity of light hitting the CdS photoresistor to be quantified. The diagram for this circuit can be seen in the image below.  </p>
                                    <img class="img-fluid rounded mb-5" src="assets/img/Circuit.PNG" alt="" />
                                    <p class="mb-5">This circuit was created by making a jump wire from the 5V pin on the arduino, feeding into the photoresistor. There is then a white wire reading the Vout result to the A0 pin on the arduino. From this same node the 10Kohm resistor connected to ground. It does this by connecting to the rail on the right, that has been grounded using the grounding pin from the arduino. Given the 10Kohm resistor, and an input voltage of 5V, the current being drawn from the circuit in the figure above is 1.92e-14 Amps with high illumination. In low illumination the current is found to be 9.803e-6 Amps. The circuit that was built is shown in the image below.  </p>
                                    <img class="img-fluid rounded mb-5" src="assets/img/20210220_161107.jpg" alt="" />
                                    <p class="mb-5">Once this circuit was complete it was used to measure different values taken from the A0 output with different lighting conditions. The A0 values tend to range anywhere between 700-800 in normal lighting conditions. When the photoresistor is illuminated this value jumps up to 900. This gives a quantitative idea of how the A0 values differ given different lighting conditions. </p>
                                    <p class="mb-5">The final light following robot requires two eyes. This means two circuits like the one above must be built, one for the right eye and one for the left. This circuit was created by mounting each photoresistor to the breadboard, with one facing left and the other right. Then, similar to the first circuit each eye has 5V coming from the arduino pin into one side of the resistor. The left eye then has it’s Vout value being read to A0, and the right eye is reading Vout to A1. Each circuit then has a 10Kohm resistor connected to the Vout node, which then goes to a rail that has been grounded using the arduino. This completed circuit can be seen in the image below.  </p>
                                    <img class="img-fluid rounded mb-5" src="assets/img/EyesCircuit.jpg" alt="" />
                                    <p class="mb-5">In order to program the robot, there has to be a method of determining where the brighter lights are located. This is done by finding the Vout values for each eye, and normalizing them using the equation seen below. </p>
                                    <img class="img-fluid rounded mb-5" src="assets/img/equation.PNG" alt="" />
                                    <p class="mb-5">The process of normalizing gets a ratio, ensuring the robot can function even if it's moved between locations with different lighting conditions. If the NM is equal to 0.25 it means the light is dimmer. If it's 0.5 it means each photoresistor is reading the same lighting conditions. If it's equal to 0.75 it means the photoresistor is facing a brighter light. </p>
                                    <p class="mb-5">The code for this section reads the values on the A0 and A1 pins, as the left and right photoresistor values respectively. It then calculates the normalized values for left and right, and returns them. These will eventually be used to indicate how the robot should move, and where it should go. When this code was run on the final circuit it found that when lighting conditions were equal on both sides of the robot both the NMleft and NMright values read 0.5. When it was brighter on the left side it read a consistent value of 0.57 on the left (brighter) side and 0.43 on the right (dimmer) side, and vice versa. </p>

                                    <!-- Portfolio Modal - Image-->
                                    <!-- Portfolio Modal - Text-->
                                    <button class="btn btn-primary" data-dismiss="modal">
                                        <i class="fas fa-times fa-fw"></i>
                                        Close Window
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- Portfolio Modal 2-->
        <div class="portfolio-modal modal fade" id="portfolioModal2" tabindex="-1" role="dialog" aria-labelledby="portfolioModal2Label" aria-hidden="true">
            <div class="modal-dialog modal-xl" role="document">
                <div class="modal-content">
                    <button class="close" type="button" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true"><i class="fas fa-times"></i></span>
                    </button>
                    <div class="modal-body text-center">
                        <div class="container">
                            <div class="row justify-content-center">
                                <div class="col-lg-8">
                                    <!-- Portfolio Modal - Title-->
                                    <h2 class="portfolio-modal-title text-secondary text-uppercase mb-0" id="portfolioModal2Label">Lab 2</h2>
                                    <!-- Icon Divider-->
                                    <div class="divider-custom">
                                        <div class="divider-custom-line"></div>
                                        <div class="divider-custom-icon"><i class="fas fa-star"></i></div>
                                        <div class="divider-custom-line"></div>
                                    </div>
                                     <!-- Portfolio Modal - Text-->
                                    <p class="font-weight-bold">Part 0: Playing with the ADC  </p>
                                    <p class="text-left">The purpose of the first part of the lab was gaining familiarity with the ADC. The first task was to determine the value of the prescaler being used in the ADC. This prescaler value is important because it's used to determine the CLK_ADC value, which is the clock that times the ADC process. This value is found by dividing the CLOCK_PER value (signal generated by CPU clock) by the prescaler. The prescaler was found by reading bits 2-0, in the CONTROLC register. These values were found to be 110. This is a value of 0x6, which corresponds to a prescaler value of 128.  </p>
                                    <p class="text-left">Once the prescaler for the ADC is found, the prescaler value that fixes the value of CLK_PER was found. This value was found by reading the values of bits 4-1 in the MCLKCTRLB register. These values were found to be 0000, which corresponds to a prescaler value of 2. In order to determine if this prescaler value was used bit 0 was read from the MCLKCTRLB register. This is the PEN bit, and is the enable bit to indicate if the prescaler is enabled. When bits 4-0 were read it yielded a result of 00000, which means the PEN bit is equal to 0, and therefore not enabled. The datasheet indicates that if PEN is written to 1, then the prescaler determines the division ratio of the main clock. Since this is written to 0, it indicates that the prescaler isn’t enabled, and therefore isn’t being used. This means that CLK_PER is equal to CLK_MAIN.  </p>
                                    <p class="text-left">Since it’s been determined that the CLK_PER signal is equal to CLK_MAIN, CLK_PER is known to be 16MHz, which is the clock frequency of the nano. Dividing CLK_PER by the ADC prescaler of 128 yields a value of 125kHz. This is the frequency of the CLK_ADC signal. The ADC can only handle input clock frequencies between 0.05-1.5MHz, according to the datasheet. Given this information, the minimum allowable ADC prescaler that can be used for the CLK_PER signal is 16. This yields a CLK_ADC frequency of 1 MHz, which is the highest value possible while remaining within the acceptable range (below 1.5MHz). If the prescaler 8 is used it yields 2MHz, which is too high.                                    </p>
                                    <p class="text-left">Given the information above, various ADC prescalers were tested to determine how fast the arduino can operate. When a value of 16 is used for the ADC prescaler the output on the A3 pin is 693. This is the result output that was used to determine the Vref value in Lab 1, and is the expected output. The 693 value is the output for all prescaler values between 256-8. For the prescaler values 2 and 4, the output is 1023. This indicates that with these prescaler values the frequency is too high, and it's running too fast for the arduino to handle. This is because with these lower prescaler values the clock cycle is too fast. Within the arduino the capacitors are being charged, and when the clock cycle is too fast the capacitors don’t have time to fully discharge, and therefore the correct value can’t be read. Although a prescaler value of 8 was determined to be too high in the previous part, it gave the correct result in reality. This is likely because 8 was only borderline working, and would fail at higher voltage values.  </p>
                                    <p class="font-weight-bold">Part 1: Familiarize yourself with the H-Bridge and test it  </p>
                                    <p class="text-left">In order to control the motors on the robot with the arduino, an H-bridge needed to be used. The H-bridge used is the L293D. This chip was mounted at the rear of the breadboard near the motors. The H-bridge connections were made for each motor by connecting pins 4, 5, 12 and 13 to ground. Pin 1 is the enable pin for motor A, and it is connected to the arduino pin 21, which is D3. Pin 9 on the H-bridge is the enable pin for motor B, and is connected to digital pin 5. Pins 2 and 7 on the H-bridge control the direction of motor A and are connected to digital pins 2 and 4 on the arduino. Pins 15 and 10 on the H-bridge control the direction of motor B, and are connected to pints 8 and 7 on the arduino. Pins 3 and 6 on the H-bridge are connected to motor A, with pin 3 connecting to power coming off motor A, and pin 6 connecting to ground. Pins 14 and 11 on the H-bridge connected to motor B, with pin 14 connecting to the power coming off motor B and pin 11 connecting to ground. Pin 8 on the H-bridge connects to the 4.5V batteries to power the motors, and pin 16 is connected to the +5V on the arduino to power the H-bridge. These connections on the breadboard can be seen in the image below.  </p>
                                    <img class="img-fluid rounded mb-5" src="assets/img/SubmissionFBreadboard.jpg" alt="" />
                                    <p class="text-left">Once these connections were complete, code was written to run the motors, and ensure all motors were running properly. In order to test this the motors were both run forwards together, backwards together, and then in opposite directions before coming to a stop. In order for the motors to run, the enable pin must be set to high. A low value on 1A with a high value on 2A would cause the left motor to turn right, while a high value on 1A and a low value on 2A would cause the motor to turn left. If both 1A and 2A are set to high, or both to low, the motor will come to a fast stop. In order to code all the wheel movements in sequence a variable was declared in the code to keep track of the time the code has been running. To start both wheels were kept stationary for a second. This was done by setting 1A, 2A, 3A, and 4A to low. 1A and 2A control the left motor, and 3A, and 4A, control the right. Once the code had been running for 1 second, both wheels started moving forward. This was done by setting 1A to low, 2A to high, 3A to low, and 4A to high. After a second passed all these signals were reversed to cause the wheels to go backwards. In order to make the wheels spin opposite 1A was set to high, 2A to low, 3A to low and 4A to high. After a second of this all were set to low to bring the wheels to a stop. This process is shown in the video below.  </p>
                                    <!-- Portfolio Modal - Video of wheels-->
                                    <div class="embed-responsive embed-responsive-16by9">
                                        <iframe class="embed-responsive-item" src="https://www.youtube.com/embed/SpX5qfSglBM" allowfullscreen></iframe>
                                    </div> 
                                    <p class="font-weight-bold">  </p>

                                    <p class="font-weight-bold">Part 2: Calibrate Motors  </p>
                                    <p class="text-left">In order to calibrate the motors a lot of trial and error was used. This was required because no motors are perfect. The two motors powering the robot rotated at different speeds, especially under load. Therefore they had to run at different speeds that were calibrated to keep the robot moving in a straight line. This was done by writing code  that could cause the robot to pause for a second, before moving both wheels forward for 6 seconds. This was enough time to ensure the robot was moving in a straight line. The robot was not connected to the usb cable for this part, and was therefore powered by the 9 volt battery. If the robot didn’t move in a straight line, the PWM value was modified to eliminate the turn. The robot turning to the right indicated that the left motor was too strong, and vice versa. Therefore trial and error was used to alter the speeds of each motor until the robot moved in a straight line. The speeds found to work at a slow pace were 70 on motor A, and 60 on motor B. The speeds that were used at a medium pace were 127 for motor A, and 125 for motor B. The slow speeds can be seen in the first figure below, and the medium speed in the second.   </p>

                                    <!-- Portfolio Modal - Video G-->
                                    <div class="embed-responsive embed-responsive-16by9">
                                        <iframe class="embed-responsive-item" src="https://www.youtube.com/embed/AGGwCuNd0qY" allowfullscreen></iframe>
                                    </div>    
                                    <!-- Portfolio Modal - Video H-->
                                    <div class="embed-responsive embed-responsive-16by9">
                                        <iframe class="embed-responsive-item" src="https://www.youtube.com/embed/hwhRQtzUy4s" allowfullscreen></iframe>
                                    </div>   
                                    <p class="font-weight-bold">  </p>
                                    <p class="font-weight-bold">Part 3: Incorporate the Photosensors  </p>
                                    <p class="text-left">Once the motor functions were understood, and the motor speeds were calibrated for a straight line, the light following robot could be completed. This was done by first setting the motor A and motor B values such that the robot can move forward in a straight line at medium speed. There are then a bunch of variables set to help determine robot behavior down the line. All the control pins are set to output, seeing as they’re all outputting values that are being read in the code. In the setup state it sets the initial state of the motors as off. It also determines what the current lighting conditions are, so these can be used in the future to determine if a light has been turned on. It then calculates the current left and right normalized measurement values. If these are within a certain tolerance, the robot determines that there’s no light and spins in a circle while flashing the led on and off each second. If the NM values aren’t close to each other it means a light has been turned on. If the NMleft value is greater it means the light is to the left, and the motor speeds are altered to turn the robot to the left. If the NMright value is greater it means the light is to the right, and the motor speeds and directions change to turn the robot to the right.  In both these situations the robot will continue turning towards the light until the NM values are within a certain tolerance of each other again. At this point, assuming the light hasn’t turned off, the robot will start moving in a straight line towards the light. If at any point in this process the light turns off the robot will spin in a circle again. This behavior can be seen in the video below.  </p>
                                    <!-- Portfolio Modal - Follow Light-->
                                    <div class="embed-responsive embed-responsive-16by9">
                                        <iframe class="embed-responsive-item" src="https://www.youtube.com/embed/Bx4Hxr2dqws" allowfullscreen></iframe>
                                    </div> 
                                    <p class="font-weight-bold">  </p>

                                    <p class="font-weight-bold"> Updates to Protect Circuit  </p>
                                    <p class="text-left">Modifications were made to the circuit in order to protect the hardware. Resistors, capacitors and additional wires were added to ensure the the arduino and H-bridge don't get overloaded. These modifications can be seen in the image below.  </p>
                                    <img class="img-fluid rounded mb-5" src="assets/img/20210329_135211.jpg" alt="" />

                                    <button class="btn btn-primary" data-dismiss="modal">
                                        <i class="fas fa-times fa-fw"></i>
                                        Close Window
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- Portfolio Modal 3-->
        <div class="portfolio-modal modal fade" id="portfolioModal3" tabindex="-1" role="dialog" aria-labelledby="portfolioModal3Label" aria-hidden="true">
            <div class="modal-dialog modal-xl" role="document">
                <div class="modal-content">
                    <button class="close" type="button" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true"><i class="fas fa-times"></i></span>
                    </button>
                    <div class="modal-body text-center">
                        <div class="container">
                            <div class="row justify-content-center">
                                <div class="col-lg-8">
                                    <!-- Portfolio Modal - Title-->
                                    <h2 class="portfolio-modal-title text-secondary text-uppercase mb-0" id="portfolioModal3Label">Lab 3</h2>
                                    <!-- Icon Divider-->
                                    <div class="divider-custom">
                                        <div class="divider-custom-line"></div>
                                        <div class="divider-custom-icon"><i class="fas fa-star"></i></div>
                                        <div class="divider-custom-line"></div>
                                    </div>
                                    <p class="text-left"> Lab 3 focused on filtering, and the fourier transform. The first section focused on the theoretical frequency response of a low pass, high pass and band pass filter. This was found by building each of these circuits in LTSpice, with the given component values. These circuits were then run in simulation to determine the theoretical frequency response. The circuits built in LTSpice for the low pass, high pass and band pass respectively can be seen below.   </p>
                                    <img class="img-fluid rounded mb-5" src="assets/img/LowPassDiagram.JPG" alt="" />
                                    <img class="img-fluid rounded mb-5" src="assets/img/HighPassDiagram.JPG" alt="" />
                                    <img class="img-fluid rounded mb-5" src="assets/img/BandPassDiagram.JPG" alt="" />

                                    <p class="text-left"> The frequency response graphs generated by these filters for the low pass, high pass and band pass respectively are shown below.  </p>
                                    <img class="img-fluid rounded mb-5" src="assets/img/LowPassGraph.JPG" alt="" />
                                    <img class="img-fluid rounded mb-5" src="assets/img/HighPassGraph.JPG" alt="" />
                                    <img class="img-fluid rounded mb-5" src="assets/img/BandPassGraphGithub.JPG" alt="" />
                                    
                                    <p class="text-left"> Using the theoretical data found above, the frequency response created by filters in the lab can be compared against the correct frequency response graphs found here. This helps in determining the accuracy of the filters built on the breadboard later in the lab.  </p>
                                    <p class="text-left"> A microphone circuit was added to the breadboard. This microphone circuit diagram, as well as the actual circuit can be seen below.   </p>
                                    <img class="img-fluid rounded mb-5" src="assets/img/MicrophoneDiagram.JPG" alt="" />
                                    <img class="img-fluid rounded mb-5" src="assets/img/MicrophoneCircuit.jpg" alt="" />

                                    <p class="text-left"> Once the microphone circuit was completed, the arduino was coded to read values from microphone circuit output. It then converted these ADC values into a signed 16 bit number. These numbers were then read by MATLAB. In order to ensure MATLAB could read the values at an appropriate speed the baud rate was modified to match matlab. Once the arduino code was sending correct data to MATLAB, the MATLAB code played a tone at a specified frequency, and then read the data from the output and took the fourier transform of the data. It then plotted this data in both the time domain and the frequency domain. When a tone at 500 Hz was played, it created the graph seen below.  </p>
                                    <img class="img-fluid rounded mb-5" src="assets/img/Canvas1.9.PNG" alt="" />

                                    <p class="text-left"> Since the peak was so small, the microphone circuit was improved with an amplifier. The diagram for this circuit can be seen below, along with an image of this improved circuit on the breadboard.   </p>
                                    <img class="img-fluid rounded mb-5" src="assets/img/AmplifiedDiagram.JPG" alt="" />
                                    <img class="img-fluid rounded mb-5" src="assets/img/Canvas2.1.jpg" alt="" />

                                    <p class="text-left"> The high pass, low pass and band pass filters were then each individually applied to the output of the amplified microphone circuit. These filters were not effective, and didn’t follow the theoretical data gotten from the first part at all. The graphs of the theoretical response generated by LTSpice, and the data from actual filters can be seen below for the low pass, high bass and band pass respectively. Due to the poor data quality, no further analysis was performed. </p>
                                    <img class="img-fluid rounded mb-5" src="assets/img/LowPassSubmit.jpg" alt="" />
                                    <img class="img-fluid rounded mb-5" src="assets/img/HighPassSubmit.jpg" alt="" />
                                    <img class="img-fluid rounded mb-5" src="assets/img/BandPassSubmit.jpg" alt="" />

                                    <p class="text-left"> Finally the arduino was programmed to calculate the fourier transform. With this implementation, the arduino completed all the fourier transform calculations and output the results into the serial monitor. These samples were taken at a sampling interval of 0.41667 ms, and the values sampled were converted into signed 16 bit integers. These integers were then processed by the FFT library, and returned 128 bins of values. The plots of these values can be seen below for MATLAB playing a tone of 500Hz, 700Hz and 900Hz respectively.    </p>
                                    <img class="img-fluid rounded mb-5" src="assets/img/500HzGraph.jpg" alt="" />
                                    <img class="img-fluid rounded mb-5" src="assets/img/700HzGraph.jpg" alt="" />
                                    <img class="img-fluid rounded mb-5" src="assets/img/900HzGraph.jpg" alt="" />

                                    <button class="btn btn-primary" data-dismiss="modal">
                                        <i class="fas fa-times fa-fw"></i>
                                        Close Window
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- Portfolio Modal 4-->
        <div class="portfolio-modal modal fade" id="portfolioModal4" tabindex="-1" role="dialog" aria-labelledby="portfolioModal4Label" aria-hidden="true">
            <div class="modal-dialog modal-xl" role="document">
                <div class="modal-content">
                    <button class="close" type="button" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true"><i class="fas fa-times"></i></span>
                    </button>
                    <div class="modal-body text-center">
                        <div class="container">
                            <div class="row justify-content-center">
                                <div class="col-lg-8">
                                    <!-- Portfolio Modal - Title-->
                                    <h2 class="portfolio-modal-title text-secondary text-uppercase mb-0" id="portfolioModal4Label">Lab 4</h2>
                                    <!-- Icon Divider-->
                                    <div class="divider-custom">
                                        <div class="divider-custom-line"></div>
                                        <div class="divider-custom-icon"><i class="fas fa-star"></i></div>
                                        <div class="divider-custom-line"></div>
                                    </div>
                                    <!-- Portfolio Modal - Image-->
                                    <p class="text-left">Lab 4 involves bringing together all components of previous labs. The first part of Lab 4 was placing the ultrasonic sensor on the front of the robot. The trigger and echo pin were hooked up, and the sensor was given power and grounded. The sensor works by sending ultrasonic waves out from the sensor. These waves bounce off objects, and the sensor measures the time it takes for the wave to return, and calculates the distance to the object from this information. The ultrasonic sensor placement can be seen below.   </p>
                                    <img class="img-fluid rounded mb-5" src="assets/img/Sensor.jpg" alt="" />
                                    <p class="text-left">Once the ultrasonic sensor was attached, the arduino was coded to read information from it. This code used two digital pins for the emitter and the receiver, and then converted the result into centimeters, using an equation found in the lecture notes. Once this code was complete, the accuracy of the sensor was tested. This was done by placing an object a known distance away from the sensor, and printing what the sensor was reading at different distances. This yielded very accurate results as can be seen in the table below. The blue line plots the distance measured from the US sensor as a function of actual distance. The orange line is the difference between these two values. Since the orange line is very small and flat, it indicates that the ultrasonic sensor is consistently giving accurate data.   </p>
                                    <img class="img-fluid rounded mb-5" src="assets/img/Canvas1.1Graph-MeasurementAndErrorGraph.jpg" alt="" />
                                    <p class="text-left">The demo for the first part of lab one was done on a course with the robot and objects placed similar to the diagram below. </p>
                                    <img class="img-fluid rounded mb-5" src="assets/img/Demo1Figure.jpg" alt="" />
                                    <p class="text-left">An image of the actual setup that was used can be seen below. </p>
                                    <img class="img-fluid rounded mb-5" src="assets/img/Setup.jpg" alt="" />
                                    <p class="text-left">The first demo completed in lab 4 was the robot turning in a circle and locating objects. The robot starts motionless with the LED off, and is listening. When it hears a frequency of 550 Hz, it turns around slowly, and measures distances. When it senses obstacle 1 approximately 30 cm away it turns on the LED. Once the obstacle is no longer in sight the LED turns off. When it sees obstacle 2 approximately 60 cm away the LED turns on, and once object 2 is no longer in sight it turns the LED off and the robot comes to a stop. It then returns to listening and will remain that way indefinitely. The video of the robot performing this task is seen below. </p>

                                    <!-- Portfolio Modal - Video of robot spinning-->
                                    <div class="embed-responsive embed-responsive-16by9">
                                        <iframe class="embed-responsive-item" src="https://www.youtube.com/embed/lmLhegO7L2s" allowfullscreen></iframe>
                                    </div> 
                                    <p class="font-weight-bold">  </p>
                                    <p class="text-left">The final part of this lab involved using the ultrasonic sensors and the photosensors to lead the robot around a maze setup. The robot had to navigate the maze environment as seen below. While doing this it turned the LED on and off depending on the location, and what the sensors were reading. This maze environment can be seen in the image below.    </p>
                                    <img class="img-fluid rounded mb-5" src="assets/img/TryAgain.JPG" alt="" />
                                    <p class="text-left">The bright lights in this image indicate a flashlight, which was used to lure the robot through the environment. The robot should always stop 5cm before hitting the obstacles in the maze, regardless of where the flashlight is trying to lead it. When the robot is facing north towards obstacle 1, it should not move to the left, regardless of the flashlight. This is all demonstrated in the video below.     </p>
                                    <div class="embed-responsive embed-responsive-16by9">
                                        <iframe class="embed-responsive-item" src="https://www.youtube.com/embed/zNZ3urOtSzQ" allowfullscreen></iframe>
                                    </div> 
                                    <p class="font-weight-bold">  </p>


                                    <button class="btn btn-primary" data-dismiss="modal">
                                        <i class="fas fa-times fa-fw"></i>
                                        Close Window
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>


        <!-- Bootstrap core JS-->
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.bundle.min.js"></script>
        <!-- Third party plugin JS-->
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-easing/1.4.1/jquery.easing.min.js"></script>
        <!-- Contact form JS-->
        <script src="assets/mail/jqBootstrapValidation.js"></script>
        <script src="assets/mail/contact_me.js"></script>
        <!-- Core theme JS-->
        <script src="js/scripts.js"></script>
    </body>
</html>
